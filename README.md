# 🌟 馒头bot (AstrBot-Mantou-Bot)

**馒头bot** 是一款专为 AstrBot 设计的高级插件，深度集成了 **资源搜索、失效检测、一键转存、自动分享** 四大核心能力。它不仅能帮你找到全网资源，更能确保你拿到的每一个链接都是真实有效的。

---

## ✨ 核心特性

### 🔍 1. 多源并行搜索
- **并发请求**：支持配置多个搜索 API，利用 Python 异步协程同时请求，极速获取结果。
- **智能去重**：自动识别多源中的重复链接，保证搜索列表简洁。
- **网盘优先级**：根据自定义权重（如 夸克、百度、UC）自动排序，优先展示你最想要的网盘资源。

### 🛡️ 2. 实时失效检测 (核心优势)
- **毫秒级校验**：在结果展示给用户之前，插件会在后台自动模拟浏览器行为进行校验。
- **深度识别**：
    - **百度**：支持三步跳转校验及 surl 提取。
    - **夸克**：通过官方 API 校验链接状态及密码。
    - **UC**：特别修复了违规拦截/status 3 等隐性失效识别。
- **自动净化**：仅展示“存活”的资源，彻底告别“链接已失效”的尴尬。

### 🚀 3. 一键极速转存
- **数字序号选择**：搜索后直接回复对应数字，系统即刻开始转存。
- **自动化流程**：自动创建日期或资源命名的文件夹，转存后自动生成您的**专属分享链接**。
- **防重机制**：可选开启自动去重，避免重复转存占用空间。

### 🧹 4. 标题智能净化
- **去除杂质**：自动过滤标题中的推广链接、广告尾缀、多余符号。
- **高亮匹配**：优先展示包含“全集”、“合集”字样的优质资源。

---

## 🛠️ 安装与配置

### 1. 基础配置
在 AstrBot 管理面板页面，进入插件设置：
- **search_config**：
    - `resource_api`: 填入搜索接口列表（例如：`["http://api1.com", "http://api2.com"]`）。
    - `netdisk_priority`: 设置网盘展示顺序（如 `quark,baidu,uc`）。
- **网盘设置 (Quark/Baidu/UC)**：
    - `cookie`: 填入对应网盘的登录凭证。
    - `enable_validate`: 强烈建议开启，享受实时失效过滤。

### 2. 如何获取 Cookie？
- **百度/夸克**：使用电脑浏览器登录网页版，按 F12 打开控制台，在网络 (Network) 选项卡中刷新页面，找到任意请求中的 `cookie` 字段。
- **UC**：建议使用手机预览模式或手机浏览器登录 `wan.uc.cn` 进行抓取。

---

## 📝 常用指令

| 指令 | 说明 | 示例 |
| :--- | :--- | :--- |
| `搜 [关键词]` | 发起全网资源搜索 | `搜 庆余年2` |
| `[数字]` | 搜索结果返回后，直发序号进行转存 | `1` |
| `save_quark [链接]` | 手动触发夸克转存并分享 | `save_quark https://pan.quark.cn/...` |

---

## 🤝 鸣谢与声明

- 本项目转存逻辑部分参考自 `wanpan` 框架。
- 失效检测算法基于 `share-sniffer` 逻辑进行移植与增强。
- 本插件仅供个人学习与技术交流使用，请务必遵守各平台服务条款。

---

*馒头bot - 让资源获取更简单。*
